<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GT7 Racing Championship</title>
    <style>
        /* (CSS beze zmƒõny ‚Äì zachov√°no z p≈Øvodn√≠ verze) */
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üèÅ GT7 Racing Championship</h1>
            <div class="subtitle">Ofici√°ln√≠ p≈ôehled z√°vod≈Ø a v√Ωsledk≈Ø</div>
        </header>

        <div class="tabs">
            <button class="tab active" data-tab="current">Aktu√°ln√≠ sez√≥na</button>
            <button class="tab" data-tab="archive">Archiv</button>
            <button class="tab" data-tab="admin">Admin</button>
        </div>

        <div id="current-tab">
            <div id="countdown-container"></div>

            <div class="section animate-in">
                <h2>Pr≈Øbƒõ≈æn√© po≈ôad√≠</h2>
                <table class="standings-table">
                    <thead>
                        <tr>
                            <th>Jezdec</th>
                            <th>ü•á 1. m√≠sta</th>
                            <th>ü•à 2. m√≠sta</th>
                            <th>ü•â 3. m√≠sta</th>
                            <th>Body</th>
                        </tr>
                    </thead>
                    <tbody id="standings-body"></tbody>
                </table>
            </div>
            
            <div class="chart-container animate-in">
                <h2>V√Ωvoj bod≈Ø v sez√≥nƒõ</h2>
                <div id="points-chart"></div>
            </div>

            <div class="section">
                <h2>Nadch√°zej√≠c√≠ z√°vody</h2>
                <div id="upcoming-races"></div>
            </div>

            <div class="section">
                <h2>Probƒõhl√© z√°vody</h2>
                <div class="filter-bar">
                    <input type="text" id="filter-manufacturer" class="filter-input" placeholder="üîç V√Ωrobce (nap≈ô. Toyota, BMW...)">
                    <input type="text" id="filter-drivetrain" class="filter-input" placeholder="üîç Pohon (MR, FR, RR, 4WD, AWD...)">
                    <input type="text" id="filter-circuit" class="filter-input" placeholder="üîç Okruh (nap≈ô. Spa, Monza...)">
                    <button class="btn" onclick="clearFilters()">Vymazat filtry</button>
                </div>
                <div id="past-races"></div>
            </div>
        </div>

        <div id="archive-tab" class="hidden">
            <div class="section">
                <h2>Archiv minul√Ωch sez√≥n</h2>
                <div id="archive-content"></div>
            </div>
        </div>

        <div id="admin-tab" class="hidden">
            <div class="section">
                <h2>P≈ôidat nov√Ω z√°vod</h2>
                <form id="race-form">
                    <div class="form-group">
                        <label>Datum</label>
                        <input type="date" id="race-date" required>
                    </div>
                    <div class="form-group">
                        <label>N√°zev okruhu</label>
                        <input type="text" id="circuit-name" placeholder="Nap≈ô. Spa-Francorchamps" required>
                    </div>
                    <div class="form-group">
                        <label>Povolen√° vozidla</label>
                        <input type="text" id="allowed-cars" placeholder="Nap≈ô. Gr.3" required>
                    </div>
                    <div class="form-group">
                        <label>Index v√Ωkonu</label>
                        <input type="text" id="performance-index" placeholder="Nap≈ô. 700 PP">
                    </div>
                    <div class="form-group">
                        <label>Tuning</label>
                        <select id="tuning">
                            <option value="Povolen">Povolen</option>
                            <option value="Zak√°z√°n">Zak√°z√°n</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Pneumatiky</label>
                        <input type="text" id="tires" placeholder="Nap≈ô. Racing Hard">
                    </div>
                    <div class="form-group">
                        <label>Poƒçet kol</label>
                        <input type="number" id="laps" placeholder="10">
                    </div>
                    <div class="form-group">
                        <label>Rychlost opot≈ôeben√≠ pneumatik</label>
                        <input type="text" id="tire-wear" placeholder="Nap≈ô. x5">
                    </div>
                    <div class="form-group">
                        <label>Rychlost spot≈ôeby paliva</label>
                        <input type="text" id="fuel-consumption" placeholder="Nap≈ô. x3">
                    </div>
                    <div class="form-group">
                        <label>Rychlost dopl≈àov√°n√≠ paliva v boxech</label>
                        <input type="text" id="refuel-speed" placeholder="Nap≈ô. Norm√°ln√≠">
                    </div>
                    <div class="form-group">
                        <label>Dopl≈àuj√≠c√≠ informace</label>
                        <textarea id="additional-info" rows="3" placeholder="Jak√©koliv dal≈°√≠ pozn√°mky..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>V√Ωrobce (pro filtrov√°n√≠)</label>
                        <input type="text" id="manufacturer" placeholder="Nap≈ô. Toyota, BMW, Porsche...">
                    </div>
                    <div class="form-group">
                        <label>Typ pohonu (pro filtrov√°n√≠)</label>
                        <input type="text" id="drivetrain" placeholder="MR, FR, RR, 4WD, AWD...">
                    </div>
                    <button type="submit" class="btn">P≈ôidat z√°vod</button>
                </form>
            </div>

            <div class="section">
                <h2>Zadat v√Ωsledky z√°vodu</h2>
                <form id="results-form">
                    <div class="form-group">
                        <label>Vyberte z√°vod</label>
                        <select id="select-race" required></select>
                    </div>
                    <div class="form-group">
                        <label>1. m√≠sto</label>
                        <select id="pos1" required>
                            <option value="">Vyberte jezdce</option>
                            <option value="Viki">Viki</option>
                            <option value="M√°ra">M√°ra</option>
                            <option value="Maty">Maty</option>
                            <option value="Hardy">Hardy</option>
                            <option value="Ondra">Ondra</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>2. m√≠sto</label>
                        <select id="pos2" required>
                            <option value="">Vyberte jezdce</option>
                            <option value="Viki">Viki</option>
                            <option value="M√°ra">M√°ra</option>
                            <option value="Maty">Maty</option>
                            <option value="Hardy">Hardy</option>
                            <option value="Ondra">Ondra</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>3. m√≠sto</label>
                        <select id="pos3" required>
                            <option value="">Vyberte jezdce</option>
                            <option value="Viki">Viki</option>
                            <option value="M√°ra">M√°ra</option>
                            <option value="Maty">Maty</option>
                            <option value="Hardy">Hardy</option>
                            <option value="Ondra">Ondra</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>YouTube URL (nepovinn√©)</label>
                        <input type="url" id="youtube-url" placeholder="https://www.youtube.com/watch?v=...">
                    </div>
                    <button type="submit" class="btn">Vygenerovat JSON</button>
                </form>
                <div id="json-output-container"></div>
            </div>
        </div>
    </div>

    <script>
        // ... (zbytek skriptu beze zmƒõny kromƒõ showTab a results-form listeneru)
        function showTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('[id$="-tab"]').forEach(t => t.classList.add('hidden'));
            
            document.querySelector(`.tab[data-tab="${tab}"]`).classList.add('active');
            document.getElementById(`${tab}-tab`).classList.remove('hidden');
        }

        document.querySelectorAll('.tab').forEach(tabBtn => {
            tabBtn.addEventListener('click', e => {
                const tab = e.target.dataset.tab;
                showTab(tab);
            });
        });

        document.getElementById('results-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const raceIndex = parseInt(document.getElementById('select-race').value, 10);
            const race = data.currentSeason.races[raceIndex];

            if (!race) {
                alert('Z√°vod nebyl nalezen.');
                return;
            }

            race.results = {
                first: document.getElementById('pos1').value,
                second: document.getElementById('pos2').value,
                third: document.getElementById('pos3').value
            };

            const youtubeUrl = document.getElementById('youtube-url').value;
            if (youtubeUrl) race.youtubeUrl = youtubeUrl;

            alert('V√Ωsledky p≈ôid√°ny! Zkop√≠rujte JSON n√≠≈æe a ulo≈æte do data.json');
            document.getElementById('json-output-container').innerHTML = 
                `<div class="json-output">${JSON.stringify(data, null, 2)}</div>`;

            e.target.reset();
            renderAll();
        });
    </script>
</body>
</html>
