<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GT7 Racing Championship 2025</title>
  <link rel="stylesheet" href="GT7style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    window.showTab = function(tab, evt) {
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      if (evt && evt.target) evt.target.classList.add('active');
      else {
        const btn = Array.from(document.querySelectorAll('.tab')).find(b=>{ const oc = b.getAttribute('onclick')||''; return oc.includes("'" + tab + "'") || oc.includes('"' + tab + '"') || oc.includes(tab); });
        if (btn) btn.classList.add('active');
      }
      document.querySelectorAll('[id$="-tab"]').forEach(el=>el.classList.add('hidden'));
      const panel = document.getElementById(tab + '-tab');
      if (panel) panel.classList.remove('hidden');
    };
  </script>
</head>
<body>
  <div class="container">
    <header>
      <h1>🏁 GT7 Racing Championship 2025</h1>
      <div class="small">Oficiální přehled závodů, výsledků a statistik</div>
      <div class="auth-controls">
        <button id="btn-signin" class="btn" onclick="signIn()">Přihlásit se (admin)</button>
        <button id="btn-signout" class="btn secondary hidden" onclick="signOutUser()">Odhlásit se</button>
        <span id="user-email" class="small"></span>
      </div>
    </header>

    <div class="tabs">
      <button class="tab active" onclick="showTab('current', event)">Aktuální sezóna</button>
      <button class="tab" onclick="showTab('archive', event)">Archiv</button>
      <button class="tab" onclick="showTab('hall', event)">Hall of Fame</button>
      <button class="tab" onclick="showTab('admin', event)">Admin</button>
    </div>

    <div id="current-tab">
      <div class="section">
        <h2>Průběžné pořadí</h2>
        <div id="leaderboard-container">--- načítání ---</div>
        <canvas id="points-chart" style="margin-top:20px; max-height:400px;"></canvas>
      </div>
    </div>

    <div id="archive-tab" class="hidden">
      <div class="section">
        <h2>Archiv sezón</h2>
        <div id="archive-content"></div>
      </div>
    </div>

    <div id="hall-tab" class="hidden">
      <div class="section">
        <h2>Hall of Fame 🏆</h2>
        <div id="hall-of-fame"></div>
        <canvas id="hall-bar-chart" style="max-height:300px;margin-top:12px;"></canvas>
      </div>
    </div>

    <div id="admin-tab" class="hidden">
      <div class="section">
        <h2>Admin</h2>
        <div id="admin-panel">
          <div id="admin-forms" class="hidden">
            <p>Admin sekce (viditelná, pokud jste přihlášen jako admin)</p>
          </div>
          <div id="not-admin" class="small">Přihlaste se jako admin (Google) pro úpravy.</div>
        </div>
      </div>
    </div>

  </div>

  <script type="module" src="GT7script.js"></script>
</body>
</html>
